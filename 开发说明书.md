# Amazon中国卖家快速识别插件开发说明书

## 1. 项目概述

### 1.1 项目背景

在Amazon等电商平台上购物时，有些用户希望能够快速识别出商品的卖家来源国，特别是中国卖家。目前，用户需要点击进入商品详情页，然后查找卖家信息，再点击进入卖家详情页面才能确认卖家的国家信息，这个过程非常繁琐。

### 1.2 项目目标

开发一个Google Chrome浏览器扩展，能够在Amazon搜索结果页面和商品详情页面自动识别并标记中国卖家的商品，提高用户筛选效率。

### 1.3 主要功能

1. 自动识别Amazon页面上的卖家信息
2. 判断卖家是否来自中国
3. 在搜索结果页面直接标记中国卖家的商品
4. 提供筛选功能，可以只显示中国卖家的商品
5. 支持用户自定义设置和偏好

## 2. 技术方案

### 2.1 技术选型

- **开发语言**：JavaScript、HTML、CSS
- **框架**：Chrome Extension API
- **数据存储**：Chrome Storage API
- **UI框架**：原生HTML/CSS + 可选的轻量级框架如Bootstrap

### 2.2 系统架构

插件将采用典型的Chrome扩展架构，包含以下组件：

1. **Background Script**：负责插件的核心逻辑和数据处理
2. **Content Script**：注入到Amazon网页中，负责页面解析和DOM操作
3. **Popup页面**：提供用户界面和设置选项
4. **Options页面**：提供更详细的设置选项
5. **Storage**：存储用户设置和缓存数据

### 2.3 工作流程

1. 用户在Amazon网站搜索商品（如"bathroom cabinet"）
2. 插件自动检测页面类型（搜索结果页/商品详情页）
3. 对于搜索结果页：
   - 解析每个商品卡片，提取卖家信息
   - 如果无法直接获取卖家国家，则异步请求卖家详情页
   - 根据获取的信息判断是否为中国卖家
   - 在商品卡片上添加明显标记（如中国国旗图标或特定颜色边框）
4. 对于商品详情页：
   - 解析页面中的卖家信息
   - 判断是否为中国卖家
   - 在页面显著位置添加卖家国家信息
5. 提供筛选按钮，点击后只显示中国卖家的商品

## 3. 功能详细设计

### 3.1 卖家识别算法

识别中国卖家的方法包括但不限于：

1. **直接匹配**：检查卖家详情页中的地址信息是否包含"China"、"CN"、"中国"等关键词
2. **地址分析**：检查地址中是否包含中国省份、城市名称（如广东、深圳等）
3. **邮编匹配**：检查邮编格式是否符合中国邮编规则（6位数字）
4. **店铺名称分析**：检查店铺名称是否包含拼音或中文特征
5. **历史数据**：建立已知中国卖家数据库，用于快速匹配

### 3.2 用户界面设计

#### 3.2.1 搜索结果页标记

- 在每个商品卡片右上角添加一个小图标，表示卖家国家（中国卖家使用中国国旗图标）
- 商品卡片边框添加特定颜色（可自定义）以区分中国卖家和其他卖家
- 添加悬浮提示，显示更详细的卖家信息

#### 3.2.2 筛选功能

- 在搜索结果页面顶部添加筛选按钮
- 点击后可以选择："显示所有卖家"、"只显示中国卖家"、"隐藏中国卖家"
- 筛选结果实时更新，无需刷新页面

#### 3.2.3 设置页面

- 标记样式设置：图标样式、颜色、大小等
- 筛选偏好设置：默认筛选模式
- 高级设置：自定义识别规则、关键词等
- 数据管理：清除缓存、导入/导出设置等

### 3.3 性能优化

1. **缓存机制**：缓存已识别的卖家信息，避免重复请求
2. **异步加载**：使用异步方式获取卖家详情，不阻塞页面加载
3. **批量处理**：对搜索结果页的商品进行批量处理，提高效率
4. **延迟加载**：优先处理可见区域内的商品，滚动时再处理新显示的商品

## 4. 开发规范

### 4.1 代码规范

#### 4.1.1 JavaScript规范

- 使用ES6+语法标准
- 使用严格模式（'use strict'）
- 变量命名采用驼峰式（camelCase）
- 常量使用全大写加下划线（UPPER_SNAKE_CASE）
- 类名使用大驼峰式（PascalCase）
- 私有方法和属性以下划线开头（_privateMethod）
- 使用JSDoc风格的注释

```javascript
// 示例代码
'use strict';

const DEFAULT_SETTINGS = {
  highlightColor: '#ffebee',
  showIcon: true
};

class SellerDetector {
  constructor(options) {
    this.options = {...DEFAULT_SETTINGS, ...options};
    this._cache = new Map();
  }
  
  /**
   * 检测卖家是否来自中国
   * @param {string} sellerInfo - 卖家信息文本
   * @return {boolean} 是否为中国卖家
   */
  isChineseSeller(sellerInfo) {
    // 实现检测逻辑
  }
}
```

#### 4.1.2 HTML/CSS规范

- HTML使用语义化标签
- CSS类名使用kebab-case（如chinese-seller-highlight）
- 使用CSS变量存储主题颜色和尺寸
- 响应式设计，适应不同屏幕尺寸

#### 4.1.3 文件组织

```
/amazon-cn-seller-detector
  /manifest.json       # 扩展清单文件
  /background.js       # 后台脚本
  /content.js          # 内容脚本
  /popup
    /popup.html        # 弹出窗口HTML
    /popup.js          # 弹出窗口脚本
    /popup.css         # 弹出窗口样式
  /options
    /options.html      # 选项页面HTML
    /options.js        # 选项页面脚本
    /options.css       # 选项页面样式
  /lib                 # 通用库和工具函数
  /assets              # 图标和其他资源
  /styles              # 全局样式
  /README.md           # 项目说明文档
```

### 4.2 版本控制

- 使用Git进行版本控制
- 遵循[语义化版本控制](https://semver.org/)规范
- 提交信息格式：`<type>(<scope>): <subject>`
  - type: feat, fix, docs, style, refactor, test, chore等
  - scope: 影响范围，如ui, core, api等
  - subject: 简短描述

### 4.3 测试规范

- 单元测试：使用Jest框架
- 端到端测试：使用Puppeteer模拟用户操作
- 测试覆盖率目标：核心功能>80%
- 每个主要功能模块至少有一个测试用例

### 4.4 文档规范

- 代码内使用JSDoc风格注释
- 项目根目录包含README.md，说明项目概述、安装方法和基本使用
- /docs目录包含详细文档，包括API文档、架构说明等
- 重要算法和复杂逻辑需要单独文档说明

## 5. 项目计划

### 5.1 开发阶段

1. **准备阶段**（1周）
   - 需求分析和细化
   - 技术选型和架构设计
   - 开发环境搭建

2. **核心功能开发**（2周）
   - 卖家信息提取模块
   - 中国卖家识别算法
   - 页面标记功能

3. **UI开发**（1周）
   - 弹出窗口界面
   - 设置页面
   - 页面标记样式

4. **测试与优化**（1周）
   - 单元测试和集成测试
   - 性能优化
   - 兼容性测试

5. **发布准备**（1周）
   - 文档完善
   - 打包和发布准备
   - 用户反馈收集机制

### 5.2 发布计划

1. **内部测试版**（Alpha）
   - 核心功能可用
   - 提供给内部测试人员使用
   - 收集初步反馈

2. **公开测试版**（Beta）
   - 所有计划功能可用
   - 提供给小部分用户测试
   - 收集用户反馈并迭代

3. **正式版**（v1.0）
   - 稳定可靠的完整功能
   - 发布到Chrome Web Store
   - 持续收集用户反馈

### 5.3 维护计划

- 定期更新（每2-4周）以适应Amazon网站变化
- 根据用户反馈添加新功能
- 修复bug和安全问题
- 性能优化和改进

## 6. 风险评估与应对策略

### 6.1 潜在风险

1. **网站结构变化**：Amazon可能会更改网站结构，导致插件无法正常工作
   - 应对策略：模块化设计，将页面解析逻辑与业务逻辑分离，便于快速适应变化

2. **卖家信息获取限制**：Amazon可能限制对卖家信息的访问
   - 应对策略：多种识别方法结合，不依赖单一信息源

3. **性能问题**：插件可能影响页面加载速度
   - 应对策略：异步处理，优化算法，实现缓存机制

4. **准确性问题**：卖家识别可能存在误判
   - 应对策略：持续优化算法，允许用户反馈错误判断

### 6.2 合规性考虑

1. 确保插件符合Chrome Web Store政策
2. 尊重Amazon的服务条款，不进行过度爬取或干扰网站正常功能
3. 明确告知用户插件的功能和数据使用情况
4. 不收集用户个人数据，保护用户隐私

## 7. 结论

本项目旨在开发一个Chrome浏览器扩展，帮助用户在Amazon网站上快速识别中国卖家的商品。通过自动分析页面内容，插件将在搜索结果页面直接标记出中国卖家的商品，大大简化用户的筛选过程。

该插件采用现代Web技术开发，注重性能优化和用户体验，同时遵循严格的开发规范和测试流程，确保产品质量和可维护性。

项目计划分为5个阶段，预计总开发周期为6周，后续将根据用户反馈持续迭代优化。

---

## 附录：技术参考

### Chrome扩展开发资源

- [Chrome扩展开发文档](https://developer.chrome.com/docs/extensions/)
- [Chrome扩展API参考](https://developer.chrome.com/docs/extensions/reference/)
- [Chrome Web Store开发者控制台](https://chrome.google.com/webstore/devconsole/)

### 相关技术文档

- [JavaScript MDN文档](